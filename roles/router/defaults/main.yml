---
# =============================================================================
# Router Role - Default Variables (OpenWrt specific)
# =============================================================================

# -----------------------------------------------------------------------------
# VPN Domain Configuration (Russia profile)
# -----------------------------------------------------------------------------

vpn_ipv6_enabled: false

vpn_domains_lists:
  - additional
  - antigravity
  - claude
  - copilot
  - datadog
  - google
  - instagram
  - jetbrains
  - linkedin
  - netflix
  - openai
  - telegram
  - warp
  - windsurf
  - x

vpn_services_exclude: []

vpn_domains:
  additional: true
  antigravity: true
  claude: true
  copilot: true
  datadog: true
  google: true
  instagram: true
  jetbrains: true
  linkedin: true
  netflix: true
  openai: true
  telegram: false
  warp: true
  windsurf: true
  x: true

vpn_outbound_common:
  tag: vpn-out
  type: vless
  server_port: 8443
  flow: xtls-rprx-vision
  # Transport: tcp, xhttp (xray only), ws, grpc
  transport:
    type: tcp
    path: /
    mode: auto
    extra_headers: {}
  packet_encoding: xudp
  tls:
    enabled: true
    insecure: false
    server_name: yandex.com
    disable_sni: false
  utls:
    enabled: true
    fingerprint: random
  reality:
    enabled: true

# -----------------------------------------------------------------------------
# System Configuration
# -----------------------------------------------------------------------------

router_network_lan_ipaddr: "192.168.1.1"
router_network_lan_netmask: "255.255.255.0"
router_network_wan_proto: "dhcp"
router_network_wan_mac: ""

# -----------------------------------------------------------------------------
# VPN Configuration
# -----------------------------------------------------------------------------

router_vpn_enabled: true

# VPN client: sing-box or xray
# Note: xhttp transport requires xray (sing-box doesn't support it)
# If set to 'auto', will use xray when transport=xhttp, otherwise sing-box
router_vpn_client: auto

# -----------------------------------------------------------------------------
# Proxy Configuration
# -----------------------------------------------------------------------------

router_proxy_enabled: true
router_proxy_port: 2080
router_xray_chain_port: 2081

# -----------------------------------------------------------------------------
# Performance
# -----------------------------------------------------------------------------

router_packet_steering: true
router_flow_offloading: true
router_hw_offloading: true

router_sysctl_enabled: true
router_sysctl_rmem_max: 16777216
router_sysctl_wmem_max: 16777216
router_sysctl_rmem_default: 1048576
router_sysctl_wmem_default: 1048576
router_sysctl_tcp_rmem: "4096 1048576 16777216"
router_sysctl_tcp_wmem: "4096 1048576 16777216"
router_sysctl_netdev_max_backlog: 5000
router_sysctl_mtu_probing: 1

# -----------------------------------------------------------------------------
# xray Configuration
# -----------------------------------------------------------------------------

router_xray_log_level: error

# Health check (burstObservatory) settings
# interval: how often to probe servers (15s = fast failover, 3m = default)
# timeout: max wait time for each probe
router_xray_observatory_interval: "10s"
router_xray_observatory_timeout: "5s"
router_xray_observatory_sampling: 2

# -----------------------------------------------------------------------------
# sing-box Configuration
# -----------------------------------------------------------------------------

router_singbox_log_level: error

router_singbox_dns_servers:
  - address: "tls://8.8.8.8"
    tag: "google-dns"
  - address: "tls://1.1.1.1"
    tag: "cloudflare-dns"

router_singbox_inbound:
  interface_name: tun0
  address: ["172.16.250.1/30"]
  domain_strategy: ipv4_only
  mtu: 9000
  auto_route: false
  strict_route: false
  sniff: true
  stack: system
  endpoint_independent_nat: false
  udp_timeout: "5m"

router_singbox_route:
  auto_detect_interface: true

# -----------------------------------------------------------------------------
# WiFi Configuration (defaults)
# -----------------------------------------------------------------------------

router_wifi_devices:
  - index: 0
    enabled: true
  - index: 1
    enabled: true

router_wifi_ssid_2g: "OpenWRT_2G"
router_wifi_ssid_5g: "OpenWRT_5G"

router_wifi_ifaces:
  - index: 0
    enabled: true
    options:
      - option: ssid
        value: "{{ router_wifi_ssid_2g }}"
      - option: encryption
        value: "psk2+sae"
      - option: key
        value: "{{ vault_wifi_password }}"
  - index: 1
    enabled: true
    options:
      - option: ssid
        value: "{{ router_wifi_ssid_5g }}"
      - option: encryption
        value: "psk2+sae"
      - option: key
        value: "{{ vault_wifi_password }}"
